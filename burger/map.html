<!DOCTYPE html>
<s></s>  <title> Map</title>

<link href="assests/css/bootstrap.min.css.map" rel="stylesheet">

<link href="assests/css/styles.css" rel= "stylesheet">

</head>

<body>
  <h1> this is the map</h1>

  <div>
  <b>Start: </b>
  <select id="start">
    <option value="chicago, il">Chicago</option>
      <option value="st louis, mo">St Louis</option>
      <option value="joplin, mo">Joplin, MO</option>

  </select>
  <b>End: </b>
  <select id="end">
    <option value="chicago, il">Chicago</option>
       <option value="st louis, mo">St Louis</option>
       <option value="joplin, mo">Joplin, MO</option>
  </select>
  </div>



  <div id="map"></div>
</body>

<script>

function initMap() {
  var mapDiv = document.getElementById('map');
  var directionsService = new google.maps.DirectionsService;
  var directionsDisplay = new google.maps.DirectionsRenderer;

  var map = new google.maps.Map(mapDiv, {
    center: {lat: 40.8665, lng: -73.0357},
    zoom: 11
});

if (navigator.geolocation){
  navigator.geolocation.getCurrentPosition(showPosition);
} else {
console.log('didnt work')
}

function showPosition(position) {
  var pos = {
     lat: position.coords.latitude,
     lng: position.coords.longitude
   };
   map.setCenter(pos);


   var request = {
       location:  {lat: pos.lat, lng: pos.lng},
       radius: '500',
       types: ['food'],
       query: 'Burger'
     };

   var service = new google.maps.places.PlacesService(map);
   service.textSearch(request, callback);

   function callback(results, status) {
     var latBurger = results[0].geometry.location.lat()
     var lngBurger = results[0].geometry.location.lng()

     directionsService.route({
       origin: {lat: pos.lat, lng: pos.lng},
       destination: {lat: latBurger, lng: lngBurger},
       travelMode: google.maps.TravelMode.DRIVING
     }, function(response, status) {
       if (status === google.maps.DirectionsStatus.OK) {
         directionsDisplay.setDirections(response);
       } else {
         window.alert('Directions request failed due to ' + status);
       }
     });

directionsDisplay.setMap(map);
// calculateAndDisplayRoute(directionsService, directionsDisplay);
  }

 //


}




 var onChangeHandler = function() {

};

  document.getElementById('start').addEventListener('change', onChangeHandler);
  document.getElementById('end').addEventListener('change', onChangeHandler);



 }



 function calculateAndDisplayRoute(directionsService, directionsDisplay) {
         directionsService.route({
           origin: document.getElementById('start').value,
           destination: document.getElementById('end').value,
           travelMode: google.maps.TravelMode.DRIVING
         }, function(response, status) {
           if (status === google.maps.DirectionsStatus.OK) {
             directionsDisplay.setDirections(response);
           } else {
             window.alert('Directions request failed due to ' + status);
           }
         });
  }











 </script>




<script src="https://maps.googleapis.com/maps/api/js?libraries=places&callback=initMap" async defer></script>

</body>
</html>
